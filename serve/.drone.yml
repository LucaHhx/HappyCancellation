kind: pipeline
name: build
type: docker
volumes:
  - name: go-pkg
    host:
      path: /root/go
  - name: go-cache
    host:
      path: /root/.cache/go-build

steps:
  - name: go-build
    image: golang:1.20.4
    commands:
       - export https_proxy=http://172.19.0.1:7893 http_proxy=http://172.19.0.1:7893 all_proxy=socks5://172.19.0.1:7893
       - curl www.google.com
#      - cd serve
#      - ls
#      - go mod tidy
#      - go build -o serve
#      - ls
#      - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build
    volumes:
      - name: go-pkg
        path: /root/go
      - name: go-cache
        path: /root/.cache/go-build

